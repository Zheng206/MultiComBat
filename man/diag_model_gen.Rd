% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/diagnostics.R
\name{diag_model_gen}
\alias{diag_model_gen}
\title{Generate a diagnostics-ready model bundle}
\usage{
diag_model_gen(
  bat,
  data,
  covar,
  model,
  formula = NULL,
  ref.batch = NULL,
  bat_adjust = TRUE,
  ...
)
}
\arguments{
\item{bat}{Factor (or coercible) of batch labels (length n).}

\item{data}{Numeric n x G matrix/data frame of responses.}

\item{covar}{Data frame of covariates (or NULL for a null model).}

\item{model}{Modeling function accepting \code{formula} and \code{data}.}

\item{formula}{RHS formula for the covariates (exclude batch; added internally if \code{bat_adjust = TRUE}).}

\item{ref.batch}{Optional reference batch level.}

\item{bat_adjust}{Logical; if TRUE (default) include batch in fitting via \code{model_fitting()}.}

\item{...}{Passed to the modeling function.}
}
\value{
A list containing at least \code{$fits}, \code{$data}, \code{$mod}, tagged with class
\code{"lm_model"}, \code{"gam_model"}, or \code{"lmerMod_model"} accordingly.
}
\description{
Fits per-feature models with or without batch dummies and tags the result
with a class used by \code{diag_model_summary()}.
}
